---
title: Dependencies
---

Historically cloud teams have tried to avoid dependencies and coupling between microservices and APIs
because it creates a lot of infrastructure and CI/CD complexity. However, its all too natural for
developers to try to extend what exists rather than reinvent it, and many teams ended up with complex
webs of microservices nonetheless. 

Fortunately, this problem of "dependencies" has been solved before. Every language and operating system
on earth has tools for dependency management to help developers collaborate and extend each others work.
Now Architect is here to provide the same value for APIs and microservices.

## Why use dependencies?

Citing dependencies as part of your component is not the most natural way for developers to integrate with
software made by other teams, but its also the only way to achieve [on-demand environments](/deployments/automated-previews)
for distributed applications.

Every time a component is deployed with Architect, it will automatically deploy (if needed) and connect to
cited dependencies. Perhaps even more impressive than that is that it will also deploy the dependencies OF your
component's dependencies and ensure they're integrated as well.

Without dependency management integrated into deployments, each and every application would have to maintain a
complex web of CI pipelines or centralized infrastructure-as-code (IaC) templates to create new environments which
can be an educational and logistical nightmare. With Architect, all you ever need to know is your immediate dependencies
and the rest will be automated for you.

## Registering dependencies

Before we can begin using dependencies, we need to register a component that will act as a dependency for others. There
are no restrictions on what type of component can be used as a dependency. All you need is to run the `register` command
to publish your component to Architect's cloud registry.

<Note>
  If you're component builds docker images from source, those images will also be published to Architect's registry with
  the same access rights.
</Note>

```sh
$ architect register ./backend --tag latest --account my-account
```

Haven't created a component before? Check out the [creating components](/guides/create-a-component) guide to learn more.

## Using dependencies

Now that we have a component in the registry, we can use it as a dependency for another one. Citing another component as
a dependency is easy using the `dependencies` block inside the component spec. The below example shows how to cite a component
named `backend` as a dependency so that it gets automatically deployed with your own component.

```yaml architect.yml
dependencies:
  backend: latest
```

You may also want to integrate with one or more services inside the dependency component. You can easily point to `services`, `outputs`,
and other resources declared inside dependencies using Architect's expression syntax:

```yaml architect.yml
services:
  app:
    build:
      context: ./
    environment:
      BACKEND_ADDR: ${{ dependencies.backend.services.api.interfaces.main.url }}
```

### Available references

Service addresses aren't the only thing you can inject into your own component from dependencies. Developers can
point to just about any resoure declared by the dependency to enrich their own configuration:

| Key                             | Description                                        |
| ------------------------------- | -------------------------------------------------- |
| `dependencies.<name>.services`  | Allows you to inject values associated with [services](/components/services) inside the dependency  |
| `dependencies.<name>.databases` | Allows you to inject values associated with [databases](/components/databases) inside the dependency |
| `dependencies.<name>.outputs`   | Allows you to inject output values issued by the dependency |

## Debugging dependencies

By default Architect will pull dependencies down from the cloud registry on every deployment. But if you want to test changes to
two components at once, you can do so by linking the dependency to your host machine with `architect link`. This will cause Architect
to use the local version of the components rather than trying to pull them from the Architect cloud registry. This is helpful when
you are actively developing multiple components that are dependent on one another. 

```sh
# Tells architect to use the local source code to fulfill dependencies on the `backend`
$ architect link ./backend/

# Will build and connect to the backend code found locally instead of the docker images pulled from Architect Cloud
$ architect dev ./frontend/
```